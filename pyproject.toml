[project]
name = "gliner-api"
version = "0.3.5"
description = "Easily configurable API & frontend providing simple access to dynamic NER models"
readme = "README.md"
requires-python = "==3.13.9"
dependencies = [
    "fastapi[standard]==0.133.0",
    "gitpython==3.1.46",
    "huggingface-hub==1.4.1",
    "prometheus-client==0.24.1",
    "pydantic-settings==2.13.1",
    "uvicorn[standard]==0.41.0",
]

[project.optional-dependencies]
cpu = [
    "torch==2.10.0",
    "gliner[stanza]==0.2.25",
    "onnxruntime==1.24.2",
]
gpu = [
    "torch==2.10.0",
    "gliner[stanza]==0.2.25",
    "onnxruntime-gpu==1.24.2",
]
frontend = [
    "gradio==6.6.0",
    "httpx==0.28.1",
    "stamina==25.2.0",
]

[tool.uv]
conflicts = [
    [
        { extra = "cpu" },
        { extra = "gpu" },
    ],
]

[tool.uv.sources]
torch = [
    { index = "pytorch-cpu", extra = "cpu" },
    { index = "pytorch-cu128", extra = "gpu" },
]

[[tool.uv.index]]
name     = "pytorch-cu128"
url      = "https://download.pytorch.org/whl/cu128"
explicit = true

[[tool.uv.index]]
name     = "pytorch-cpu"
url      = "https://download.pytorch.org/whl/cpu"
explicit = true

[dependency-groups]
dev = [
    "ipykernel==7.2.0",
    "pre-commit==4.5.1",
    "ruff==0.15.2",
    "ty==0.0.18",
]
